<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevTools Hub - 开发者工具集合</title>
    <meta name="description" content="一站式开发者工具集合，包含密码生成器、颜色调色板、正则测试器、JSON格式化器等实用工具，支持离线使用">
    <meta name="keywords" content="开发者工具,密码生成器,颜色调色板,正则表达式,JSON格式化,Base64编码,哈希计算,二维码生成,文本对比,时间戳转换">
    <meta name="author" content="DevTools Hub">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DevTools Hub">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#3498db">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/icon-167x167.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></noscript>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "DevTools Hub",
      "description": "一站式开发者工具集合，包含密码生成器、颜色调色板、正则测试器等实用工具",
      "url": "https://wxingda.github.io/devtools-hub",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "wxingda"
      }
    }
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-tools"></i> DevTools Hub</h1>
                <p>专为开发者打造的实用工具集合</p>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <nav class="nav">
            <button class="nav-btn active" data-tool="password-generator">
                <i class="fas fa-key"></i>
                <span>密码生成器</span>
            </button>
            <button class="nav-btn" data-tool="color-palette">
                <i class="fas fa-palette"></i>
                <span>颜色调色板</span>
            </button>
            <button class="nav-btn" data-tool="regex-tester">
                <i class="fas fa-search"></i>
                <span>正则测试器</span>
            </button>
            <button class="nav-btn" data-tool="json-formatter">
                <i class="fas fa-code"></i>
                <span>JSON格式化</span>
            </button>
            <button class="nav-btn" data-tool="url-encoder">
                <i class="fas fa-link"></i>
                <span>URL编码器</span>
            </button>
            <button class="nav-btn" data-tool="base64-encoder">
                <i class="fas fa-file-code"></i>
                <span>Base64编码</span>
            </button>
            <button class="nav-btn" data-tool="hash-calculator">
                <i class="fas fa-calculator"></i>
                <span>哈希计算器</span>
            </button>
            <button class="nav-btn" data-tool="timestamp-converter">
                <i class="fas fa-clock"></i>
                <span>时间戳转换</span>
            </button>
            <button class="nav-btn" data-tool="qr-generator">
                <i class="fas fa-qrcode"></i>
                <span>二维码生成</span>
            </button>
            <button class="nav-btn" data-tool="text-diff">
                <i class="fas fa-exchange-alt"></i>
                <span>文本对比</span>
            </button>
        </nav>

        <main class="main">
            <!-- 密码生成器 -->
            <div class="tool active" id="password-generator">
                <div class="tool-header">
                    <h2><i class="fas fa-key"></i> 密码生成器</h2>
                    <p>生成安全的随机密码</p>
                </div>
                <div class="tool-content">
                    <div class="form-group">
                        <label for="passwordLength">密码长度: <span id="lengthValue">16</span></label>
                        <input type="range" id="passwordLength" min="4" max="128" value="16">
                    </div>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="includeUppercase" checked> 包含大写字母 (A-Z)</label>
                        <label><input type="checkbox" id="includeLowercase" checked> 包含小写字母 (a-z)</label>
                        <label><input type="checkbox" id="includeNumbers" checked> 包含数字 (0-9)</label>
                        <label><input type="checkbox" id="includeSymbols"> 包含特殊字符 (!@#$...)</label>
                    </div>
                    <button class="btn primary" onclick="generatePassword()">
                        <i class="fas fa-refresh"></i> 生成密码
                    </button>
                    <div class="result-group">
                        <div class="result-box">
                            <input type="text" id="generatedPassword" placeholder="生成的密码将显示在这里..." readonly>
                            <button class="copy-btn" onclick="copyPassword()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="password-strength">
                            <span>密码强度: </span>
                            <div class="strength-meter">
                                <div class="strength-bar" id="strengthBar"></div>
                            </div>
                            <span id="strengthText">中等</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 颜色调色板 -->
            <div class="tool" id="color-palette">
                <div class="tool-header">
                    <h2><i class="fas fa-palette"></i> 颜色调色板</h2>
                    <p>颜色选择和格式转换</p>
                </div>
                <div class="tool-content">
                    <div class="color-picker-section">
                        <div class="color-display">
                            <div class="color-preview" id="colorPreview"></div>
                            <input type="color" id="colorPicker" value="#3498db">
                        </div>
                        <div class="color-inputs">
                            <div class="input-group">
                                <label for="hexInput">HEX</label>
                                <input type="text" id="hexInput" value="#3498db">
                            </div>
                            <div class="input-group">
                                <label for="rgbInput">RGB</label>
                                <input type="text" id="rgbInput" value="rgb(52, 152, 219)">
                            </div>
                            <div class="input-group">
                                <label for="hslInput">HSL</label>
                                <input type="text" id="hslInput" value="hsl(204, 70%, 53%)">
                            </div>
                        </div>
                    </div>
                    <div class="color-palette">
                        <h3>调色板</h3>
                        <div class="palette-colors" id="paletteColors"></div>
                        <button class="btn secondary" onclick="generatePalette()">
                            <i class="fas fa-refresh"></i> 生成新调色板
                        </button>
                    </div>
                </div>
            </div>

            <!-- 正则表达式测试器 -->
            <div class="tool" id="regex-tester">
                <div class="tool-header">
                    <h2><i class="fas fa-search"></i> 正则表达式测试器</h2>
                    <p>实时测试和验证正则表达式</p>
                </div>
                <div class="tool-content">
                    <div class="regex-section">
                        <div class="form-group">
                            <label for="regexPattern">正则表达式</label>
                            <input type="text" id="regexPattern" placeholder="输入正则表达式..." value="\\b\\w+@\\w+\\.\\w+\\b">
                        </div>
                        <div class="regex-flags">
                            <label><input type="checkbox" id="globalFlag" checked> 全局匹配 (g)</label>
                            <label><input type="checkbox" id="ignoreCaseFlag"> 忽略大小写 (i)</label>
                            <label><input type="checkbox" id="multilineFlag"> 多行模式 (m)</label>
                        </div>
                        <div class="form-group">
                            <label for="testString">测试字符串</label>
                            <textarea id="testString" rows="8" placeholder="输入要测试的文本...">
联系我们：
邮箱：admin@example.com
备用邮箱：support@test.org
电话：+86 138-0013-8000
网站：https://www.example.com
            </textarea>
                        </div>
                        <div class="regex-results">
                            <h3>匹配结果 (<span id="matchCount">0</span> 个匹配)</h3>
                            <div class="matches-list" id="matchesList"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JSON格式化器 -->
            <div class="tool" id="json-formatter">
                <div class="tool-header">
                    <h2><i class="fas fa-code"></i> JSON格式化器</h2>
                    <p>美化和压缩JSON数据</p>
                </div>
                <div class="tool-content">
                    <div class="json-section">
                        <div class="json-input">
                            <label for="jsonInput">输入JSON</label>
                            <textarea id="jsonInput" rows="12" placeholder="在这里粘贴或输入JSON数据...">
{
  "name": "DevTools Hub",
  "version": "1.0.0",
  "description": "开发者工具集合",
  "tools": ["password-generator", "color-palette", "regex-tester", "json-formatter"],
  "features": {
    "offline": true,
    "responsive": true,
    "darkMode": true
  }
}
                            </textarea>
                        </div>
                        <div class="json-controls">
                            <button class="btn primary" onclick="formatJSON()">
                                <i class="fas fa-magic"></i> 格式化
                            </button>
                            <button class="btn secondary" onclick="compressJSON()">
                                <i class="fas fa-compress"></i> 压缩
                            </button>
                            <button class="btn secondary" onclick="validateJSON()">
                                <i class="fas fa-check"></i> 验证
                            </button>
                        </div>
                        <div class="json-output">
                            <label for="jsonOutput">格式化结果</label>
                            <textarea id="jsonOutput" rows="12" readonly></textarea>
                            <div class="json-info">
                                <span id="jsonStatus"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- URL编码器 -->
            <div class="tool" id="url-encoder">
                <div class="tool-header">
                    <h2><i class="fas fa-link"></i> URL编码/解码器</h2>
                    <p>URL字符串编码解码</p>
                </div>
                <div class="tool-content">
                    <div class="url-section">
                        <div class="form-group">
                            <label for="urlInput">输入URL或文本</label>
                            <textarea id="urlInput" rows="5" placeholder="输入需要编码或解码的URL...">https://example.com/search?q=开发者工具&type=utility</textarea>
                        </div>
                        <div class="url-controls">
                            <button class="btn primary" onclick="encodeURL()">
                                <i class="fas fa-lock"></i> URL编码
                            </button>
                            <button class="btn secondary" onclick="decodeURL()">
                                <i class="fas fa-unlock"></i> URL解码
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="urlOutput">结果</label>
                            <textarea id="urlOutput" rows="5" readonly></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Base64编码器 -->
            <div class="tool" id="base64-encoder">
                <div class="tool-header">
                    <h2><i class="fas fa-file-code"></i> Base64编码器</h2>
                    <p>Base64编码解码工具</p>
                </div>
                <div class="tool-content">
                    <div class="base64-section">
                        <div class="form-group">
                            <label for="base64Input">输入文本</label>
                            <textarea id="base64Input" rows="6" placeholder="输入需要编码或解码的文本...">Hello, DevTools Hub! 你好，开发者工具集合！</textarea>
                        </div>
                        <div class="base64-controls">
                            <button class="btn primary" onclick="encodeBase64()">
                                <i class="fas fa-upload"></i> Base64编码
                            </button>
                            <button class="btn secondary" onclick="decodeBase64()">
                                <i class="fas fa-download"></i> Base64解码
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="base64Output">结果</label>
                            <textarea id="base64Output" rows="6" readonly></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 哈希计算器 -->
            <div class="tool" id="hash-calculator">
                <div class="tool-header">
                    <h2><i class="fas fa-calculator"></i> 哈希计算器</h2>
                    <p>MD5、SHA1、SHA256计算</p>
                </div>
                <div class="tool-content">
                    <div class="hash-section">
                        <div class="form-group">
                            <label for="hashInput">输入文本</label>
                            <textarea id="hashInput" rows="5" placeholder="输入需要计算哈希值的文本...">DevTools Hub - 开发者工具集合</textarea>
                        </div>
                        <div class="hash-results">
                            <div class="hash-result">
                                <label>MD5:</label>
                                <div class="result-box">
                                    <input type="text" id="md5Result" readonly>
                                    <button class="copy-btn" onclick="copyHash('md5Result')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="hash-result">
                                <label>SHA1:</label>
                                <div class="result-box">
                                    <input type="text" id="sha1Result" readonly>
                                    <button class="copy-btn" onclick="copyHash('sha1Result')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="hash-result">
                                <label>SHA256:</label>
                                <div class="result-box">
                                    <input type="text" id="sha256Result" readonly>
                                    <button class="copy-btn" onclick="copyHash('sha256Result')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 时间戳转换器 -->
            <div class="tool" id="timestamp-converter">
                <div class="tool-header">
                    <h2><i class="fas fa-clock"></i> 时间戳转换器</h2>
                    <p>Unix时间戳与日期时间互转</p>
                </div>
                <div class="tool-content">
                    <div class="timestamp-section">
                        <div class="timestamp-input">
                            <div class="form-group">
                                <label for="timestampInput">Unix时间戳</label>
                                <input type="number" id="timestampInput" placeholder="输入Unix时间戳...">
                                <button class="btn secondary" onclick="setCurrentTimestamp()">
                                    <i class="fas fa-clock"></i> 当前时间
                                </button>
                            </div>
                            <div class="form-group">
                                <label for="timestampResult">转换结果</label>
                                <input type="text" id="timestampResult" readonly>
                            </div>
                        </div>
                        <div class="datetime-input">
                            <div class="form-group">
                                <label for="datetimeInput">日期时间</label>
                                <input type="datetime-local" id="datetimeInput">
                                <button class="btn secondary" onclick="setCurrentDateTime()">
                                    <i class="fas fa-calendar"></i> 当前时间
                                </button>
                            </div>
                            <div class="form-group">
                                <label for="datetimeResult">转换结果</label>
                                <input type="text" id="datetimeResult" readonly>
                            </div>
                        </div>
                        <div class="timestamp-formats">
                            <h3>常用格式</h3>
                            <div class="format-grid">
                                <div class="format-item">
                                    <label>ISO 8601:</label>
                                    <input type="text" id="isoFormat" readonly>
                                </div>
                                <div class="format-item">
                                    <label>UTC:</label>
                                    <input type="text" id="utcFormat" readonly>
                                </div>
                                <div class="format-item">
                                    <label>本地时间:</label>
                                    <input type="text" id="localFormat" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 二维码生成器 -->
            <div class="tool" id="qr-generator">
                <div class="tool-header">
                    <h2><i class="fas fa-qrcode"></i> 二维码生成器</h2>
                    <p>将文本或URL转换为二维码</p>
                </div>
                <div class="tool-content">
                    <div class="qr-section">
                        <div class="qr-input">
                            <div class="form-group">
                                <label for="qrText">输入文本或URL</label>
                                <textarea id="qrText" rows="4" placeholder="输入要生成二维码的文本或URL...">https://github.com/wxingda/devtools-hub</textarea>
                            </div>
                            <div class="qr-options">
                                <div class="form-group">
                                    <label for="qrSize">尺寸:</label>
                                    <select id="qrSize">
                                        <option value="200">200x200</option>
                                        <option value="300" selected>300x300</option>
                                        <option value="400">400x400</option>
                                        <option value="500">500x500</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="qrLevel">纠错级别:</label>
                                    <select id="qrLevel">
                                        <option value="L">低 (7%)</option>
                                        <option value="M" selected>中 (15%)</option>
                                        <option value="Q">高 (25%)</option>
                                        <option value="H">最高 (30%)</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn primary" onclick="generateQR()">
                                <i class="fas fa-qrcode"></i> 生成二维码
                            </button>
                        </div>
                        <div class="qr-output">
                            <div id="qrDisplay" class="qr-display">
                                <p>点击"生成二维码"按钮创建二维码</p>
                            </div>
                            <div class="qr-actions">
                                <button class="btn secondary" id="downloadQR" onclick="downloadQR()" style="display: none;">
                                    <i class="fas fa-download"></i> 下载PNG
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 文本差异对比器 -->
            <div class="tool" id="text-diff">
                <div class="tool-header">
                    <h2><i class="fas fa-exchange-alt"></i> 文本差异对比</h2>
                    <p>比较两段文本的差异</p>
                </div>
                <div class="tool-content">
                    <div class="diff-section">
                        <div class="diff-inputs">
                            <div class="diff-input">
                                <label for="textA">原始文本</label>
                                <textarea id="textA" rows="15" placeholder="输入原始文本...">function generatePassword() {
    const length = parseInt(document.getElementById('passwordLength').value);
    const uppercase = document.getElementById('includeUppercase').checked;
    const lowercase = document.getElementById('includeLowercase').checked;
    const numbers = document.getElementById('includeNumbers').checked;
    const symbols = document.getElementById('includeSymbols').checked;
}</textarea>
                            </div>
                            <div class="diff-input">
                                <label for="textB">修改后文本</label>
                                <textarea id="textB" rows="15" placeholder="输入修改后的文本...">function generatePassword() {
    const length = parseInt(document.getElementById('passwordLength').value);
    const includeUppercase = document.getElementById('includeUppercase').checked;
    const includeLowercase = document.getElementById('includeLowercase').checked;
    const includeNumbers = document.getElementById('includeNumbers').checked;
    const includeSymbols = document.getElementById('includeSymbols').checked;
}</textarea>
                            </div>
                        </div>
                        <div class="diff-controls">
                            <button class="btn primary" onclick="compareTexts()">
                                <i class="fas fa-search"></i> 对比文本
                            </button>
                            <button class="btn secondary" onclick="clearDiff()">
                                <i class="fas fa-trash"></i> 清空
                            </button>
                        </div>
                        <div class="diff-output">
                            <div class="diff-stats">
                                <span id="diffStats">点击"对比文本"查看差异</span>
                            </div>
                            <div id="diffResult" class="diff-result"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2024 DevTools Hub. Made with ❤️ for developers.</p>
            <div class="footer-links">
                <a href="https://github.com/your-username/devtools-hub" target="_blank">
                    <i class="fab fa-github"></i> GitHub
                </a>
                <a href="#" onclick="showAbout()">
                    <i class="fas fa-info-circle"></i> 关于
                </a>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
    
    <!-- PWA Installation and Service Worker -->
    <script>
        // Service Worker 注册
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker 注册成功:', registration.scope);
                        
                        // 检查更新
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // 有新版本可用
                                    showUpdateAvailable();
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.log('Service Worker 注册失败:', error);
                    });
            });
        }

        // PWA 安装提示
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('PWA 安装提示被触发');
            e.preventDefault();
            deferredPrompt = e;
            showInstallPrompt();
        });

        // 显示安装提示
        function showInstallPrompt() {
            const installBanner = document.createElement('div');
            installBanner.id = 'install-banner';
            installBanner.innerHTML = `
                <div class="install-content">
                    <div class="install-text">
                        <i class="fas fa-download"></i>
                        <span>安装 DevTools Hub 到桌面，获得更好的体验！</span>
                    </div>
                    <div class="install-actions">
                        <button id="install-btn" class="btn primary">立即安装</button>
                        <button id="dismiss-btn" class="btn secondary">稍后</button>
                    </div>
                </div>
            `;
            document.body.appendChild(installBanner);

            // 安装按钮点击事件
            document.getElementById('install-btn').addEventListener('click', () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('用户接受安装');
                        } else {
                            console.log('用户拒绝安装');
                        }
                        deferredPrompt = null;
                        hideInstallPrompt();
                    });
                }
            });

            // 稍后按钮点击事件
            document.getElementById('dismiss-btn').addEventListener('click', hideInstallPrompt);

            // 显示动画
            setTimeout(() => {
                installBanner.classList.add('show');
            }, 100);
        }

        // 隐藏安装提示
        function hideInstallPrompt() {
            const banner = document.getElementById('install-banner');
            if (banner) {
                banner.classList.remove('show');
                setTimeout(() => {
                    banner.remove();
                }, 300);
            }
        }

        // 显示更新可用提示
        function showUpdateAvailable() {
            const updateBanner = document.createElement('div');
            updateBanner.id = 'update-banner';
            updateBanner.innerHTML = `
                <div class="update-content">
                    <div class="update-text">
                        <i class="fas fa-sync-alt"></i>
                        <span>DevTools Hub 有新版本可用！</span>
                    </div>
                    <div class="update-actions">
                        <button id="update-btn" class="btn primary">立即更新</button>
                        <button id="update-dismiss-btn" class="btn secondary">稍后</button>
                    </div>
                </div>
            `;
            document.body.appendChild(updateBanner);

            // 更新按钮点击事件
            document.getElementById('update-btn').addEventListener('click', () => {
                if (navigator.serviceWorker.controller) {
                    navigator.serviceWorker.controller.postMessage({ type: 'SKIP_WAITING' });
                    window.location.reload();
                }
            });

            // 稍后按钮点击事件
            document.getElementById('update-dismiss-btn').addEventListener('click', () => {
                updateBanner.remove();
            });

            // 显示动画
            setTimeout(() => {
                updateBanner.classList.add('show');
            }, 100);
        }

        // 处理 URL 参数（深链接支持）
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const tool = urlParams.get('tool');
            if (tool) {
                switchTool(tool);
            }
        });
    </script>
</body>
</html>